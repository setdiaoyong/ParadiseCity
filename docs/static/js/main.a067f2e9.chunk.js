(this["webpackJsonpparadise-city-mini"]=this["webpackJsonpparadise-city-mini"]||[]).push([[0],{0:function(t,e,a){t.exports={"sider-menu":"src_sider-menu__1Bw2a",content:"src_content__3N9hT",loading:"src_loading__3ANA8",load:"src_load__2XCvD",loaded:"src_loaded__tskcK","main-container":"src_main-container__3_HVZ",catagory:"src_catagory__2B-wO","catagory-item":"src_catagory-item__IA7Qu","catagory-item-active":"src_catagory-item-active___ITnh",title:"src_title__YXAJk","title-name":"src_title-name__1Yfuv","title-props":"src_title-props__2wQgW","title-user":"src_title-user__29Qky","article-container":"src_article-container__1teJI",back:"src_back__6MTGB","article-props":"src_article-props__TqCvT","article-title":"src_article-title__2UyCo","article-content":"src_article-content__3Q680","write-container":"src_write-container__9b_gM","write-title":"src_write-title__12-bU","write-catagory":"src_write-catagory__2LnOH","editor-container":"src_editor-container__2m6Aw","write-textarea":"src_write-textarea__152_-",parseMarkdown:"src_parseMarkdown__1ObP0",submitButton:"src_submitButton__24YPm","about-container":"src_about-container__DBowH",rot:"src_rot__115DF"}},11:function(t,e){t.exports=React},185:function(t,e){},196:function(t,e,a){"use strict";a.r(e);a(61);var n=a(13),r=a(14),c=a(17),o=a(16),i=a(0),l=a.n(i),s=a(15),u=a.n(s),m=a(1),p=a.n(m),h=a(5),d="61e06fdec3996fbda3c",g="eb8094d137bf927e7e5b2";function f(){return _.apply(this,arguments)}function _(){return(_=Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article",{method:"GET",headers:{Authorization:"token "+d+g}}).then((function(t){return t.status<299?t.json():null})).then((function(t){return t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){return y.apply(this,arguments)}function y(){return(y=Object(h.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e,{method:"GET",headers:{Authorization:"token "+d+g}}).then((function(t){return t.json()})).then((function(t){return t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=Object(h.a)(p.a.mark((function t(e,a,n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),t.next=3,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+"-"+n+"-"+r+".md",{method:"PUT",headers:{Authorization:"token "+d+g},body:JSON.stringify({message:"AutoPush Article: "+e,content:btoa(unescape(encodeURIComponent(JSON.stringify({title:e,content:a,time:r,catagory:n}))))})}).then((function(t){return t.json()})).then((function(t){return!0})).catch((function(t){return!1}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){return(E=Object(h.a)(p.a.mark((function t(e,a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("rm"===(n=prompt("\u8f93\u5165Token:"))){t.next=4;break}return alert(n+" \u4e0d\u662f\u6709\u6548\u7684 Token"),t.abrupt("return",Promise.reject());case 4:return t.next=6,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+".md",{method:"DELETE",headers:{Authorization:"token "+d+g},body:JSON.stringify({message:"AutoDelete article: "+e,sha:a})}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){console.log(t)}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var b=(0,ReactRouterDOM.withRouter)((function(t){var e=window.PARADISE_history.location.state||t.article;return document.location.hash||t.history.push("/"),React.createElement(React.Fragment,null,React.createElement("span",{className:l.a.back,onClick:function(){t.history.push("/")}},"\u8fd4\u56de"),"--mainColor: #f0f0f0"===document.querySelector(":root").getAttribute("style")?React.createElement("span",{className:l.a.back,style:{color:"red"},onClick:function(){(function(t,e){return E.apply(this,arguments)})(e.title+"-"+e.time,e.sha).then((function(){location.href=location.origin}))}},"\u5220\u9664"):null,React.createElement("div",{className:l.a["article-container"]},React.createElement("p",{className:l.a["article-title"]},e.title),React.createElement("p",{className:l.a["article-props"]},React.createElement("span",null,e.catagory||"\u6280\u672f"),e.time&&React.createElement("span",null,"\u6700\u540e\u7f16\u8f91\u4e8e ",new Date(e.time).toLocaleDateString()),e.content&&React.createElement("span",null,"\u9884\u8ba1\u9605\u8bfb\u65f6\u95f4 ",(e.content.length/200+1).toFixed(0)," \u5206\u949f")),React.createElement(u.a,{className:l.a["article-content"],source:e.content,escapeHtml:!1})))})),w=a(58),A=a(57),k=a.n(A),x=function(t){var e=React.useState("\u6280\u672f"),a=Object(w.a)(e,2),n=a[0],r=a[1];return React.createElement("div",{className:l.a["main-container"]},React.createElement("div",{className:l.a.catagory},t.articleList.map((function(t){return t.catagory||"\u6280\u672f"})).filter((function(t,e,a){return a.indexOf(t,0)===e})).reverse().map((function(t,e,a){return React.createElement("a",{onClick:function(t){r(t.target.innerText)},className:n===t?l.a["catagory-item-active"]:l.a["catagory-item"]},t)}))),t.articleList.filter((function(t){return t.name.slice(0,-17).split("-")[1]===n||void 0===t.name.slice(0,-17).split("-")[1]&&"\u6280\u672f"===n})).map((function(e){return React.createElement("p",{className:l.a.title,key:e.name,onClick:function(){t.loading(),R(e.name).then((function(t){t&&(window.PARADISE_history.push("/article",{title:JSON.parse(decodeURIComponent(escape(atob(t.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(t.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(t.content)))).time,catagory:JSON.parse(decodeURIComponent(escape(atob(t.content)))).catagory,sha:t.sha}),document.location.hash=t.sha)})).finally((function(){t.loading()}))}},React.createElement("img",{src:k.a,alt:"",className:l.a["title-user"]}),React.createElement("p",{className:l.a["title-name"]},e.name.slice(0,"0000/00/00"===e.date?-3:-17).split("-")[0]),React.createElement("span",{className:l.a["title-props"]},"0000/00/00"===e.date?"\u6765\u81ea\u535a\u5ba2\u56ed":e.date),React.createElement("span",{className:l.a["title-props"]},e.size+"\u5b57\u8282"))})))},S=function(t){Object(c.a)(a,t);var e=Object(o.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).recorder=void 0,r.clearInput=function(){r.setState({text:"",title:"",help:""}),localStorage.removeItem("writing-title"),localStorage.removeItem("writing-text")},r.save=function(){localStorage.setItem("writing-title",r.state.title),localStorage.setItem("writing-text",r.state.text)},r.push=function(){r.state.title?(r.props.loading(),function(t,e,a){return v.apply(this,arguments)}(r.state.title,r.state.text,r.state.catagory||"\u6280\u672f").then((function(){r.props.loading(),r.setState({text:"",title:"",help:"\ud83d\ude0apublish success!"})}))):r.setState({help:"\ud83e\udd22need a title!"})},r.state={text:localStorage.getItem("writing-text")||"",title:localStorage.getItem("writing-title")||"",catagory:"",help:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.recorder=setInterval((function(){var e=localStorage.getItem("writing-text")&&localStorage.getItem("writing-text").length||0;Math.abs(e-t.state.text.length)>100&&t.save()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.recorder)}},{key:"render",value:function(){var t=this;return React.createElement("div",{className:l.a["write-container"]},React.createElement("input",{className:l.a["write-title"],placeholder:"\u6807\u9898\u5c06\u51fa\u73b0\u5728\u9996\u9875",value:this.state.title,onChange:function(e){t.setState({title:e.target.value})}}),React.createElement("div",{className:l.a["editor-container"]},React.createElement("textarea",{onChange:function(e){t.setState({text:e.target.value})},placeholder:"\u4f7f\u7528Markdown\u8bed\u6cd5\u4e66\u5199\u6b63\u6587\uff0c\u5c06\u5728\u53f3\u4fa7\u9762\u677f\u9884\u89c8\u683c\u5f0f",className:l.a["write-textarea"],value:this.state.text}),React.createElement(u.a,{source:this.state.text,className:l.a.parseMarkdown,escapeHtml:!1})),React.createElement("input",{className:l.a["write-catagory"],placeholder:"\u81ea\u5b9a\u4e49\u5206\u7c7b\uff0c\u9ed8\u8ba4\u4e3a[\u6280\u672f]",value:this.state.catagory,onChange:function(e){t.setState({catagory:e.target.value})}}),React.createElement("div",null,React.createElement("button",{onClick:this.push,className:l.a.submitButton},"publish"),React.createElement("button",{className:l.a.submitButton,onClick:this.clearInput},"clear")),React.createElement("p",{style:{color:"red"}},this.state.help))}}]),a}(React.Component),N=function(){var t=document.createElement("img");return t.src="https://s11.flagcounter.com/count/m1nf/bg_FFFFFF/txt_000000/border_FFFFFF/columns_2/maxflags_64/viewers_3/labels_1/pageviews_1/flags_0/percent_0/",t.onload=function(){var e=document.querySelector(".load-counter");e&&e.classList.remove("load-counter"),e&&e.appendChild(t)},React.createElement("div",{className:l.a["about-container"]},React.createElement("p",null,"\u563f"),React.createElement("p",null,"\u8fd9\u662f\u6211\u7684\u7f51\u7edc\u65e5\u5fd7"),React.createElement("p",null,"\u770b\u770b\u548c\u4f60\u4e00\u6837\u7684\u4eba\u6765\u81ea\u54ea\u91cc"),React.createElement("div",{className:"load-counter",style:{marginTop:"10px"}}))},C=a(59),I=Object(C.a)(),O=ReactRouterDOM,D=O.BrowserRouter,U=O.Switch,Q=O.Route,M=O.Link;window.PARADISE_history=window.PARADISE_history||I;var F=function(t){Object(c.a)(a,t);var e=Object(o.a)(a);function a(){var t;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))).state={loading:!1,articleList:[],article:{}},t.initData=function(){f().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(document.location.hash){var a=document.location.hash.split("#")[1],n=e.filter((function(t){return a.indexOf(t.sha)>-1}));n.length?(t.loading(),R(n[0].name).then((function(e){e&&t.setState({article:{title:JSON.parse(decodeURIComponent(escape(atob(e.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(e.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(e.content)))).time,catagory:JSON.parse(decodeURIComponent(escape(atob(e.content)))).catagory,sha:e.sha}})})).finally((function(){t.loading()}))):location.href=location.origin}t.setState({articleList:e.map((function(t){var e=t.name.slice(-16,-3).replace(/\D*/,"");if(13===e.length){var a=new Date(parseInt(e));t.year=a.getFullYear(),t.month=a.getMonth()+1,t.day=a.getDate(),t.date=a.toLocaleDateString(),t.catagory=t.name.slice(0,-17).split("-")[1]||"\u6280\u672f"}else t.year=0,t.month=0,t.day=0,t.date="0000/00/00";return t})).sort((function(t,e){return t.date<e.date?1:-1}))||[]})})).finally((function(){t.loading()}))},t.loading=function(){t.setState({loading:!t.state.loading})},t.coloring=function(e){document.querySelector(":root").setAttribute("style","--mainColor: "+e.target.value),t.forceUpdate()},t}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.loading(),this.initData()}},{key:"render",value:function(){return React.createElement(D,{history:I},React.createElement("nav",{className:l.a["sider-menu"]},React.createElement("label",{htmlFor:"color",title:"\u70b9\u51fb\u66f4\u6362\u6587\u5b57\u989c\u8272"},"\ud83d\udc6b"),React.createElement(M,{to:"/about"},"\u7edf\u8ba1"),React.createElement(M,{to:"/write"},"\u8bb0\u5f55"),React.createElement(M,{to:"/",onClick:this.initData},"\u56de\u987e"),React.createElement("input",{type:"color",id:"color",onChange:this.coloring})),React.createElement("div",{className:l.a.content},React.createElement(U,null,React.createElement(Q,{exact:!0,path:"/"},React.createElement(x,{loading:this.loading,articleList:this.state.articleList})),React.createElement(Q,{exact:!0,path:"/article"},React.createElement(b,{loading:this.loading,article:this.state.article})),React.createElement(Q,{exact:!0,path:"/write"},React.createElement(S,{loading:this.loading})),React.createElement(Q,{exact:!0,path:"/about"},React.createElement(N,null)))),this.state.loading?React.createElement("div",{className:l.a.loading}):React.createElement("div",{className:l.a.loaded}))}}]),a}(React.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ReactDOM.render(React.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},57:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAvklEQVRYhe2YsQ2AMAwEAVHQMQSzwCzUDMI8LMMQlHRUFETCbycCffHXBqLTx0ms1OO5VTdDv1Zu9mN5GyqZp/H/+Q8SQrTGWLK6ocrInocuIQkh6ITquZucn/prs2Q30CUkIQSdkHVS2xi3fQl0CUkIQScUKOrs9iMEXUISQtAJPYr6o8PXJtkrdAlJCJF/2/tb2BB0CUkIQSekFhYhIQSdkFXUds+a/Qpr7wa6hCSEoBMKvKD9A11CEkLQCV0ZTCcOXM9UwQAAAABJRU5ErkJggg=="},60:function(t,e,a){t.exports=a(196)},61:function(t,e,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.a067f2e9.chunk.js.map