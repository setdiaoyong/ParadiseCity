(this["webpackJsonpparadise-city-mini"]=this["webpackJsonpparadise-city-mini"]||[]).push([[0],{1:function(t,e,a){t.exports={root:"src_root__39kTn",content:"src_content__2Phc-",loading:"src_loading__25YUa",load:"src_load__1xkeu",loaded:"src_loaded__1VmJY","sider-menu":"src_sider-menu__IjrAu",flagcounter:"src_flagcounter__3vBzl",about:"src_about__3dBuZ",back:"src_back__1f5Pc",title:"src_title__1wFcY","article-title":"src_article-title__2Z_DP","article-timestamp":"src_article-timestamp__21eB8","article-content":"src_article-content__ON2mb","write-title":"src_write-title__3r8TB","editor-container":"src_editor-container__GXPwU","write-textarea":"src_write-textarea__1ghOX",parseMarkdown:"src_parseMarkdown__apsFu",submitButton:"src_submitButton__17s1V"}},204:function(t,e){},215:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(73),o=a.n(c),l=(a(81),a(21)),i=a(22),s=a(25),u=a(23),m=a(26),p=a(13),h=a(11),d=a(27),f=a(1),g=a.n(f),b=a(24),_=a.n(b),E=a(3),v=a.n(E),y=a(10),w="61e06fdec3996fbda3c",x="eb8094d137bf927e7e5b2";function k(){return(k=Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article?access_token="+w+x,{method:"GET"}).then((function(t){return t.status<299?t.json():null})).then((function(t){return t})).catch((function(t){console.log(t),alert("\u83b7\u53d6\u8bb0\u5f55\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u3002")}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(){return(O=Object(y.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+"?access_token="+w+x,{method:"GET"}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){console.log(t),alert("\u83b7\u53d6\u8bb0\u5f55\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u3002")}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(){return(j=Object(y.a)(v.a.mark((function t(e,a,n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),t.next=3,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+"-"+r+".md?access_token="+w+x,{method:"PUT",body:JSON.stringify({message:"AutoPush Article: "+e,content:btoa(unescape(encodeURIComponent(JSON.stringify({title:e,content:a,time:r,category:n}))))})}).then((function(t){return t.json()})).then((function(t){return!0})).catch((function(t){return alert("\u521b\u5efa\u8bb0\u5f55\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u3002"),!1}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=Object(y.a)(v.a.mark((function t(e,a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+".md?access_token="+w+x,{method:"DELETE",body:JSON.stringify({message:"AutoDelete article: "+e,sha:a})}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var N=function(t){var e=Object(n.useState)("titleList"),a=Object(d.a)(e,2),c=a[0],o=a[1],l=Object(n.useState)([]),i=Object(d.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)({title:"",content:"",time:"",category:"",sha:""}),p=Object(d.a)(m,2),h=p[0],f=p[1];return Object(n.useEffect)((function(){t.loading(),function(){return k.apply(this,arguments)}().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.loading(),u(e.map((function(t){var e=t.name.slice(-16,-3).replace(/\D*/,"");if(13===e.length){var a=new Date(parseInt(e));t.year=a.getFullYear(),t.month=a.getMonth()+1,t.day=a.getDate(),t.date=a.toLocaleDateString()}else t.year=0,t.month=0,t.day=0,t.date="0000/00/00";return t})).sort((function(t,e){return t.date<e.date?1:-1}))||[])}))}),[]),r.a.createElement("div",null,"titleList"===c?s.map((function(e){return r.a.createElement("p",{className:g.a.title,key:e.name,onClick:function(){t.loading(),o("articleDetail"),function(t){return O.apply(this,arguments)}(e.name).then((function(e){t.loading(),e&&f({title:JSON.parse(decodeURIComponent(escape(atob(e.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(e.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(e.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(e.content)))).category,sha:e.sha})}))}},r.a.createElement("span",null,"[",e.date,"] "),e.name.slice(0,"0000/00/00"===e.date?-3:-17))})):r.a.createElement("div",null,r.a.createElement("p",{className:g.a["article-title"]},h.title),r.a.createElement("p",{className:g.a["article-timestamp"]},h.time?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:g.a.back,onClick:function(){o("titleList"),f({title:"",content:"",time:"",category:"",sha:""})}},"\u8fd4\u56de\u6807\u9898\u5217\u8868"),"--mainColor: #f0f0f0"===document.querySelector(":root").getAttribute("style")?r.a.createElement("button",{className:g.a.back,onClick:function(){(function(t,e){return S.apply(this,arguments)})(h.title+"-"+h.time,h.sha).then((function(){location.reload()}))}},"\u5220\u9664"):null,r.a.createElement("span",null,new Date(h.time).toLocaleString())):null),r.a.createElement(_.a,{className:g.a["article-content"],source:h.content,escapeHtml:!1})))},I=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).recorder=void 0,a.clearInput=function(){a.setState({text:"",title:""}),localStorage.removeItem("writing-title"),localStorage.removeItem("writing-text")},a.save=function(){localStorage.setItem("writing-title",a.state.title),localStorage.setItem("writing-text",a.state.text),console.log((new Date).toLocaleString()+"\uff0c\u81ea\u52a8\u4fdd\u5b58\u8349\u7a3f\u6210\u529f\uff01")},a.push=function(){a.state.title?(a.props.loading(),function(t,e,a){return j.apply(this,arguments)}(a.state.title,a.state.text,"\u6280\u672f").then((function(){a.props.loading(),alert("\u606d\u559c\uff0c\u53d1\u5e03\u6210\u529f\uff01"),a.clearInput()}))):alert("\u8bf7\u8f93\u5165\u6807\u9898\u3002")},a.state={text:localStorage.getItem("writing-text")||"",title:localStorage.getItem("writing-title")||"",category:"life"},a}return Object(m.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.recorder=setInterval((function(){var e=localStorage.getItem("writing-text")&&localStorage.getItem("writing-text").length||0;Math.abs(e-t.state.text.length)>100&&t.save()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.recorder)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("input",{className:g.a["write-title"],value:this.state.title,onChange:function(e){t.setState({title:e.target.value})}}),r.a.createElement("div",{className:g.a["editor-container"]},r.a.createElement("textarea",{onChange:function(e){t.setState({text:e.target.value})},className:g.a["write-textarea"],value:this.state.text}),r.a.createElement(_.a,{source:this.state.text,className:g.a.parseMarkdown,escapeHtml:!1})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.push,className:g.a.submitButton},"\u53d1\u5e03"),r.a.createElement("button",{className:g.a.submitButton,onClick:this.clearInput},"\u91cd\u7f6e")))}}]),e}(r.a.Component),F=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"\u5173\u4e8e\u4f5c\u8005"),r.a.createElement("p",null,"\u4f60\u597d\uff0c\u8bbf\u5ba2\u3002"),r.a.createElement("p",null,"\u4e3a\u4e86\u907f\u514d\u9057\u5fd8\uff0c\u6211\u642d\u5efa\u4e86\u8fd9\u4e2a\u535a\u5ba2\u7528\u6765\u8bb0\u5f55\u4e00\u5207\u3002"),r.a.createElement(p.b,{to:"/write"},r.a.createElement("a",null,"\u4f60\u53ef\u4ee5\u901a\u8fc7\u7559\u8a00\u7684\u65b9\u5f0f\u8054\u7cfb\u6211\u3002")),r.a.createElement("p",null),r.a.createElement("img",{width:"200px",src:"https://s11.flagcounter.com/count/m1nf/bg_FFFFFF/txt_000000/border_FFFFFF/columns_2/maxflags_64/viewers_3/labels_1/pageviews_1/flags_0/percent_0/",alt:""}))},C=function(t){function e(){var t,a;Object(l.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={loading:!1},a.loading=function(){a.setState({loading:!a.state.loading})},a.coloring=function(t){document.querySelector(":root").setAttribute("style","--mainColor: "+t.target.value),a.forceUpdate()},a}return Object(m.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("nav",{className:g.a["sider-menu"]},r.a.createElement(p.b,{to:"/"},r.a.createElement("ruby",null,"\u8bb0\u5f55",r.a.createElement("rt",null,"ji lu"))),r.a.createElement("label",{htmlFor:"color"}," \ud83d\udc6b "),r.a.createElement(p.b,{to:"/write"},r.a.createElement("ruby",null,"\u5199\u4f5c",r.a.createElement("rt",null,"xie zuo"))),r.a.createElement("input",{type:"color",id:"color",onChange:this.coloring})),r.a.createElement("div",{className:g.a.content},r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/"},r.a.createElement(N,{loading:this.loading})),r.a.createElement(h.a,{exact:!0,path:"/write"},r.a.createElement(I,{loading:this.loading})),r.a.createElement(h.a,{exact:!0,path:"/about"},r.a.createElement(F,null)))),r.a.createElement("div",{className:g.a.flagcounter,title:"\u4e00\u4e2a\u7b80\u5355\u7684\u8bbf\u95ee\u91cf\u7edf\u8ba1"}),r.a.createElement(p.b,{to:"/about"},r.a.createElement("ruby",null,"\u5173\u4e8e\u4f5c\u8005",r.a.createElement("rt",null,"guan yu zuo zhe"))),this.state.loading?r.a.createElement("div",{className:g.a.loading}):r.a.createElement("div",{className:g.a.loaded}))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},76:function(t,e,a){t.exports=a(215)},81:function(t,e,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.9f91527a.chunk.js.map