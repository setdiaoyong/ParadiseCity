(this["webpackJsonpparadise-city-mini"]=this["webpackJsonpparadise-city-mini"]||[]).push([[0],{1:function(e,t,a){e.exports={root:"src_root__2JL5O",content:"src_content__3N9hT",loading:"src_loading__3ANA8",load:"src_load__2XCvD",loaded:"src_loaded__tskcK","sider-menu":"src_sider-menu__1Bw2a",flagcounter:"src_flagcounter__2_mf0",about:"src_about__3l1kQ",back:"src_back__6MTGB",title:"src_title__YXAJk","article-title":"src_article-title__2UyCo","article-timestamp":"src_article-timestamp__9UsRM","article-content":"src_article-content__3Q680","write-title":"src_write-title__12-bU","editor-container":"src_editor-container__2m6Aw","write-textarea":"src_write-textarea__152_-",parseMarkdown:"src_parseMarkdown__1ObP0",submitButton:"src_submitButton__24YPm",rot:"src_rot__115DF"}},202:function(e,t){},213:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(72),c=a.n(r),i=(a(80),a(21)),l=a(22),s=a(25),u=a(23),m=a(26),h=a(17),p=a(10),d=a(18),f=a(1),g=a.n(f),b=a(24),_=a.n(b),v=a(3),E=a.n(v),w="61e06fdec3996fbda3c",y="eb8094d137bf927e7e5b2";function x(e){return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e,{method:"GET",headers:{Authorization:"token "+w+y}}).then((function(e){return e.json()})).then((function(e){return e})));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}var S=function(e){var t=Object(n.useState)("titleList"),a=Object(d.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(!1),l=Object(d.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)([]),h=Object(d.a)(m,2),p=h[0],f=h[1],b=Object(n.useState)({title:"",content:"",time:"",category:"",sha:""}),v=Object(d.a)(b,2),S=v[0],N=v[1];return Object(n.useEffect)((function(){e.loading(),E.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.awrap(fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article",{method:"GET",headers:{Authorization:"token "+w+y}}).then((function(e){return e.status<299?e.json():null})).then((function(e){return e})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.loading(),f(t.map((function(e){var t=e.name.slice(-16,-3).replace(/\D*/,"");if(13===t.length){var a=new Date(parseInt(t));e.year=a.getFullYear(),e.month=a.getMonth()+1,e.day=a.getDate(),e.date=a.toLocaleDateString()}else e.year=0,e.month=0,e.day=0,e.date="0000/00/00";return e})).sort((function(e,t){return e.date<t.date?1:-1}))||[]),window.location.search){var a=window.location.search.split("?s=")[1],n=t.filter((function(e){return a.indexOf(e.sha)>-1}));n.length?(e.loading(),c("articleDetail"),x(n[0].name).then((function(t){e.loading(),window.history.replaceState(null,null,"?s="+t.sha),t&&N({title:JSON.parse(decodeURIComponent(escape(atob(t.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(t.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(t.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(t.content)))).category,sha:t.sha})})).catch((function(){u(!0)}))):location.href=location.origin}})).catch((function(){u(!0)}))}),[]),o.a.createElement("div",null,s&&o.a.createElement("h1",null,"You can not establish a connection with GitHub Server.",o.a.createElement("br",null),o.a.createElement("a",{href:location.href},"\u270aRELOAD\u270a")),"titleList"===r?p.map((function(t){return o.a.createElement("p",{className:g.a.title,key:t.name,onClick:function(){e.loading(),c("articleDetail"),x(t.name).then((function(t){e.loading(),window.history.replaceState(null,null,"?s="+t.sha),t&&N({title:JSON.parse(decodeURIComponent(escape(atob(t.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(t.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(t.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(t.content)))).category,sha:t.sha})})).catch((function(){u(!0)}))}},o.a.createElement("span",null,"[",t.date,"] "),t.name.slice(0,"0000/00/00"===t.date?-3:-17))})):o.a.createElement("div",null,o.a.createElement("p",{className:g.a["article-title"]},S.title),o.a.createElement("p",{className:g.a["article-timestamp"]},S.time?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:g.a.back,onClick:function(){c("titleList"),N({title:"",content:"",time:"",category:"",sha:""})}},"RETURN"),"--mainColor: #f0f0f0"===document.querySelector(":root").getAttribute("style")?o.a.createElement("span",{className:g.a.back,style:{color:"red"},onClick:function(){var e,t;(e=S.title+"-"+S.time,t=S.sha,E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+".md",{method:"DELETE",headers:{Authorization:"token "+w+y},body:JSON.stringify({message:"AutoDelete article: "+e,sha:t})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)})));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))).then((function(){location.href=location.origin})).catch((function(){u(!0)}))}},"DELETE"):null,o.a.createElement("span",null,new Date(S.time).toLocaleString())):null),o.a.createElement(_.a,{className:g.a["article-content"],source:S.content,escapeHtml:!1}),o.a.createElement("span",{className:g.a.back,onClick:function(){c("titleList"),N({title:"",content:"",time:"",category:"",sha:""})}},"RETURN")))},N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).recorder=void 0,a.clearInput=function(){a.setState({text:"",title:"",help:""}),localStorage.removeItem("writing-title"),localStorage.removeItem("writing-text")},a.save=function(){localStorage.setItem("writing-title",a.state.title),localStorage.setItem("writing-text",a.state.text)},a.push=function(){a.state.title?(a.props.loading(),function(e,t,a){var n;return E.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=Date.now(),o.next=3,E.a.awrap(fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+"-"+n+".md",{method:"PUT",headers:{Authorization:"token "+w+y},body:JSON.stringify({message:"AutoPush Article: "+e,content:btoa(unescape(encodeURIComponent(JSON.stringify({title:e,content:t,time:n,category:a}))))})}).then((function(e){return e.json()})).then((function(e){return!0})).catch((function(e){return!1})));case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}}))}(a.state.title,a.state.text,"\u6280\u672f").then((function(){a.props.loading(),a.setState({text:"",title:"",help:"\ud83d\ude0apublish success!"})}))):a.setState({help:"\ud83e\udd22need a title!"})},a.state={text:localStorage.getItem("writing-text")||"",title:localStorage.getItem("writing-title")||"",category:"life",help:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.recorder=setInterval((function(){var t=localStorage.getItem("writing-text")&&localStorage.getItem("writing-text").length||0;Math.abs(t-e.state.text.length)>100&&e.save()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.recorder)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("input",{className:g.a["write-title"],value:this.state.title,onChange:function(t){e.setState({title:t.target.value})}}),o.a.createElement("div",{className:g.a["editor-container"]},o.a.createElement("textarea",{onChange:function(t){e.setState({text:t.target.value})},className:g.a["write-textarea"],value:this.state.text}),o.a.createElement(_.a,{source:this.state.text,className:g.a.parseMarkdown,escapeHtml:!1})),o.a.createElement("div",null,o.a.createElement("button",{onClick:this.push,className:g.a.submitButton},"publish"),o.a.createElement("button",{className:g.a.submitButton,onClick:this.clearInput},"clear")),o.a.createElement("p",{style:{color:"red"}},this.state.help))}}]),t}(o.a.Component),O=function(){var e=document.createElement("img");return e.src="https://s11.flagcounter.com/count/m1nf/bg_FFFFFF/txt_000000/border_FFFFFF/columns_2/maxflags_64/viewers_3/labels_1/pageviews_1/flags_0/percent_0/",e.onload=function(){var t=document.querySelector(".load-counter");t&&t.classList.remove("load-counter"),t&&t.appendChild(e)},o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"Hey."),o.a.createElement("p",null,"Leaving something on the Internet!"),o.a.createElement("div",{className:"load-counter",style:{marginTop:"1em"}}))},k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1},a.loading=function(){a.setState({loading:!a.state.loading})},a.coloring=function(e){document.querySelector(":root").setAttribute("style","--mainColor: "+e.target.value),a.forceUpdate()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement("nav",{className:g.a["sider-menu"]},o.a.createElement(h.b,{to:"/"},"Article"),o.a.createElement("label",{htmlFor:"color"},"\ud83d\udc6b"),o.a.createElement(h.b,{to:"/write"},"Writing"),o.a.createElement("input",{type:"color",id:"color",onChange:this.coloring})),o.a.createElement("div",{className:g.a.content},o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/"},o.a.createElement(S,{loading:this.loading})),o.a.createElement(p.a,{exact:!0,path:"/write"},o.a.createElement(N,{loading:this.loading})),o.a.createElement(p.a,{exact:!0,path:"/about"},o.a.createElement(O,null)))),o.a.createElement("div",{className:g.a.flagcounter}),o.a.createElement(h.b,{to:"/about"},"Author"),this.state.loading?o.a.createElement("div",{className:g.a.loading}):o.a.createElement("div",{className:g.a.loaded}))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},75:function(e,t,a){e.exports=a(213)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.e575d9c9.chunk.js.map