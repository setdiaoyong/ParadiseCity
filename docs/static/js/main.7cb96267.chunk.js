(this["webpackJsonpparadise-city-mini"]=this["webpackJsonpparadise-city-mini"]||[]).push([[0],{0:function(t,e,n){t.exports={root:"src_root__39kTn",content:"src_content__2Phc-",loading:"src_loading__25YUa",load:"src_load__1xkeu",loaded:"src_loaded__1VmJY","sider-menu":"src_sider-menu__IjrAu",flagcounter:"src_flagcounter__3vBzl",about:"src_about__3dBuZ",back:"src_back__1f5Pc",title:"src_title__1wFcY","article-title":"src_article-title__2Z_DP","article-timestamp":"src_article-timestamp__21eB8","article-content":"src_article-content__ON2mb","write-title":"src_write-title__3r8TB","editor-container":"src_editor-container__GXPwU","write-textarea":"src_write-textarea__1ghOX",parseMarkdown:"src_parseMarkdown__apsFu",submitButton:"src_submitButton__17s1V",rot:"src_rot__35X_3"}},12:function(t,e){t.exports=React},185:function(t,e){},196:function(t,e,n){"use strict";n.r(e);n(60);var a=n(14),c=n(15),r=n(18),o=n(16),i=n(19),l=n(10),s=n(0),u=n.n(s),m=n(17),p=n.n(m),h=n(1),d=n.n(h),f=n(5),g="61e06fdec3996fbda3c",R="eb8094d137bf927e7e5b2";function b(){return(b=Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article",{method:"GET",headers:{Authorization:"token "+g+R}}).then((function(t){return t.status<299?t.json():null})).then((function(t){return t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t){return v.apply(this,arguments)}function v(){return(v=Object(f.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e,{method:"GET",headers:{Authorization:"token "+g+R}}).then((function(t){return t.json()})).then((function(t){return t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){return(E=Object(f.a)(d.a.mark((function t(e,n,a){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Date.now(),t.next=3,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+"-"+c+".md",{method:"PUT",headers:{Authorization:"token "+g+R},body:JSON.stringify({message:"AutoPush Article: "+e,content:btoa(unescape(encodeURIComponent(JSON.stringify({title:e,content:n,time:c,category:a}))))})}).then((function(t){return t.json()})).then((function(t){return!0})).catch((function(t){return!1}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=Object(f.a)(d.a.mark((function t(e,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+".md",{method:"DELETE",headers:{Authorization:"token "+g+R},body:JSON.stringify({message:"AutoDelete article: "+e,sha:n})}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var y=React,x=y.useEffect,O=y.useState,k=function(t){var e=O("titleList"),n=Object(l.a)(e,2),a=n[0],c=n[1],r=O(!1),o=Object(l.a)(r,2),i=o[0],s=o[1],m=O([]),h=Object(l.a)(m,2),d=h[0],f=h[1],g=O({title:"",content:"",time:"",category:"",sha:""}),R=Object(l.a)(g,2),v=R[0],E=R[1];return x((function(){t.loading(),function(){return b.apply(this,arguments)}().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.loading(),f(e.map((function(t){var e=t.name.slice(-16,-3).replace(/\D*/,"");if(13===e.length){var n=new Date(parseInt(e));t.year=n.getFullYear(),t.month=n.getMonth()+1,t.day=n.getDate(),t.date=n.toLocaleDateString()}else t.year=0,t.month=0,t.day=0,t.date="0000/00/00";return t})).sort((function(t,e){return t.date<e.date?1:-1}))||[]),window.location.search){var n=window.location.search.split("?s=")[1],a=e.filter((function(t){return n.indexOf(t.sha)>-1}));a.length?(t.loading(),c("articleDetail"),_(a[0].name).then((function(e){t.loading(),window.history.replaceState(null,null,"?s="+e.sha),e&&E({title:JSON.parse(decodeURIComponent(escape(atob(e.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(e.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(e.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(e.content)))).category,sha:e.sha})})).catch((function(){s(!0)}))):location.href=location.origin}})).catch((function(){s(!0)}))}),[]),React.createElement("div",null,i&&React.createElement("h1",null,"You can not establish a connection with GitHub Server.",React.createElement("br",null),React.createElement("a",{href:location.href},"\u270aRELOAD\u270a")),"titleList"===a?d.map((function(e){return React.createElement("p",{className:u.a.title,key:e.name,onClick:function(){t.loading(),c("articleDetail"),_(e.name).then((function(e){t.loading(),window.history.replaceState(null,null,"?s="+e.sha),e&&E({title:JSON.parse(decodeURIComponent(escape(atob(e.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(e.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(e.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(e.content)))).category,sha:e.sha})})).catch((function(){s(!0)}))}},e.name.slice(0,"0000/00/00"===e.date?-3:-17))})):React.createElement("div",null,React.createElement("p",{className:u.a["article-title"]},v.title),React.createElement("p",{className:u.a["article-timestamp"]},v.time?React.createElement(React.Fragment,null,React.createElement("span",{className:u.a.back,onClick:function(){c("titleList"),E({title:"",content:"",time:"",category:"",sha:""})}},"RETURN"),"--mainColor: #f0f0f0"===document.querySelector(":root").getAttribute("style")?React.createElement("span",{className:u.a.back,style:{color:"red"},onClick:function(){(function(t,e){return w.apply(this,arguments)})(v.title+"-"+v.time,v.sha).then((function(){location.href=location.origin})).catch((function(){s(!0)}))}},"DELETE"):null):null),React.createElement(p.a,{className:u.a["article-content"],source:v.content,escapeHtml:!1}),React.createElement("span",{className:u.a.back,onClick:function(){c("titleList"),E({title:"",content:"",time:"",category:"",sha:""})}},"RETURN")))},S=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(r.a)(this,Object(o.a)(e).call(this,t))).recorder=void 0,n.clearInput=function(){n.setState({text:"",title:"",help:""}),localStorage.removeItem("writing-title"),localStorage.removeItem("writing-text")},n.save=function(){localStorage.setItem("writing-title",n.state.title),localStorage.setItem("writing-text",n.state.text)},n.push=function(){n.state.title?(n.props.loading(),function(t,e,n){return E.apply(this,arguments)}(n.state.title,n.state.text,"\u6280\u672f").then((function(){n.props.loading(),n.setState({text:"",title:"",help:"\ud83d\ude0apublish success!"})}))):n.setState({help:"\ud83e\udd22need a title!"})},n.state={text:localStorage.getItem("writing-text")||"",title:localStorage.getItem("writing-title")||"",category:"life",help:""},n}return Object(i.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.recorder=setInterval((function(){var e=localStorage.getItem("writing-text")&&localStorage.getItem("writing-text").length||0;Math.abs(e-t.state.text.length)>100&&t.save()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.recorder)}},{key:"render",value:function(){var t=this;return React.createElement("div",null,React.createElement("input",{className:u.a["write-title"],value:this.state.title,onChange:function(e){t.setState({title:e.target.value})}}),React.createElement("div",{className:u.a["editor-container"]},React.createElement("textarea",{onChange:function(e){t.setState({text:e.target.value})},className:u.a["write-textarea"],value:this.state.text}),React.createElement(p.a,{source:this.state.text,className:u.a.parseMarkdown,escapeHtml:!1})),React.createElement("div",null,React.createElement("button",{onClick:this.push,className:u.a.submitButton},"publish"),React.createElement("button",{className:u.a.submitButton,onClick:this.clearInput},"clear")),React.createElement("p",{style:{color:"red"}},this.state.help))}}]),e}(React.Component),N=function(){var t=document.createElement("img");return t.src="https://s11.flagcounter.com/count/m1nf/bg_FFFFFF/txt_000000/border_FFFFFF/columns_2/maxflags_64/viewers_3/labels_1/pageviews_1/flags_0/percent_0/",t.onload=function(){var e=document.querySelector(".load-counter");e&&e.classList.remove("load-counter"),e&&e.appendChild(t)},React.createElement(React.Fragment,null,React.createElement("p",null,"Hey."),React.createElement("p",null,"Leaving something on the Internet!"),React.createElement("div",{className:"load-counter",style:{marginTop:"1em"}}))},I=ReactRouterDOM,j=I.BrowserRouter,C=I.Switch,F=I.Route,U=I.Link,D=function(t){function e(){var t,n;Object(a.a)(this,e);for(var c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return(n=Object(r.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(i)))).state={loading:!1},n.loading=function(){n.setState({loading:!n.state.loading})},n.coloring=function(t){document.querySelector(":root").setAttribute("style","--mainColor: "+t.target.value),n.forceUpdate()},n}return Object(i.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return React.createElement(j,null,React.createElement("nav",{className:u.a["sider-menu"]},React.createElement(U,{to:"/"},"Article"),React.createElement("label",{htmlFor:"color"},"\ud83d\udc6b"),React.createElement(U,{to:"/write"},"Writing"),React.createElement("input",{type:"color",id:"color",onChange:this.coloring})),React.createElement("div",{className:u.a.content},React.createElement(C,null,React.createElement(F,{exact:!0,path:"/"},React.createElement(k,{loading:this.loading})),React.createElement(F,{exact:!0,path:"/write"},React.createElement(S,{loading:this.loading})),React.createElement(F,{exact:!0,path:"/about"},React.createElement(N,null)))),React.createElement("div",{className:u.a.flagcounter}),React.createElement(U,{to:"/about"},"Author"),this.state.loading?React.createElement("div",{className:u.a.loading}):React.createElement("div",{className:u.a.loaded}))}}]),e}(React.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ReactDOM.render(React.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},59:function(t,e,n){t.exports=n(196)},60:function(t,e,n){}},[[59,1,2]]]);
//# sourceMappingURL=main.7cb96267.chunk.js.map