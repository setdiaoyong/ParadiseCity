(this["webpackJsonpparadise-city-mini"]=this["webpackJsonpparadise-city-mini"]||[]).push([[0],{204:function(e,t){},215:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(73),o=n.n(c),i=(n(81),n(22)),l=n(23),s=n(25),u=n(24),m=n(26),p=n(19),h=n(11),d=n(16),g=n.n(d),f=function(){return r.a.createElement(g.a,{source:'\n<span title="Gun N\' Rose\u4e50\u961f\u7684\u4e00\u9996\u97f3\u4e50\uff0c\u63cf\u8ff0\u4e86\u4e00\u4e2a\u72ec\u5904\u7684\u5feb\u4e50\u7684\u4e16\u754c">Paradise City</span> \n\u7ad9\u70b9\u6258\u7ba1\u5728Github Pages\uff0c\u662f\u4e00\u5957\u4f2a\u52a8\u6001\u7684\u535a\u5ba2\u7cfb\u7edf\u3002  \n+ \u672c\u7ad9\u628a\u4efb\u4f55\u6587\u7ae0\u3001\u7167\u7247\u3001\u8bc4\u8bba\u90fd\u8ba4\u4e3a\u662f\u6587\u4ef6\u8d44\u6e90\uff0c\u901a\u8fc7GitHub API(v3)\u4e0a\u4f20\u5230\u4ed3\u5e93\uff0c\u518d\u7f16\u5199\u4e00\u5957Web GUI\u5c06\u7528\u6237\u6307\u4ee4\u8f6c\u5316\u4e3a\u5bf9\u8fd9\u4e9b\u6587\u4ef6\u8d44\u6e90\u7684\u64cd\u4f5c\u3002  \n\n\u672c\u7ad9\u52a8\u6001\u7684\u90e8\u5206\u501f\u7528\u4e86GitHub\u7684\u4e00\u4e9b\u529f\u80fd\uff0c\u4e0e\u6b63\u7edf\u7684Web\u7cfb\u7edf\u505a\u4e2a\u7c7b\u6bd4\uff1a\n+ GitHub Repo  &ensp;&ensp;       --\x3e &ensp;  NoSQL\u6570\u636e\u5e93  \n+ GitHub Pages &ensp;             --\x3e &ensp;  Nginx Web\u670d\u52a1  \n+ GitHub API   &ensp;&ensp;&ensp; --\x3e &ensp;  \u670d\u52a1\u7aef\u7a0b\u5e8f  \n\n\u56e0\u6b64\uff0c\u672c\u7ad9\u6ca1\u6709\u771f\u6b63\u7684\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u53ea\u662f\u501f\u52a9GitHub\u5b9e\u73b0\u4e86\u9759\u6001\u535a\u5ba2\u7684\u52a8\u6001\u5316\u3002\n',escapeHtml:!1})},b=n(27),_=n(3),v=n.n(_),E=n(2),w=n.n(E),x=n(10),y="61e06fdec3996fbda3c",k="eb8094d137bf927e7e5b2";function O(){return(O=Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/ParadiseCity/contents/files/article?access_token="+y+k,{method:"GET"}).then((function(e){return e.status<299?e.json():null})).then((function(e){return e})).catch((function(e){console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(x.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/ParadiseCity/contents/files/article/"+t+"?access_token="+y+k,{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(x.a)(w.a.mark((function e(t,n,a){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now(),e.next=3,fetch("https://api.github.com/repos/xiaozhaoqi/ParadiseCity/contents/files/article/"+t+"-"+new Date(r).toLocaleDateString().replace(/\//g,"-")+".md?access_token="+y+k,{method:"PUT",body:JSON.stringify({message:"AutoPush Article: "+t,content:btoa(unescape(encodeURIComponent(JSON.stringify({title:t,content:n,time:r,category:a}))))})}).then((function(e){return e.json()})).then((function(e){return!0})).catch((function(e){return!1}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(e){var t=Object(a.useState)("titleList"),n=Object(b.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)([]),l=Object(b.a)(i,2),s=l[0],u=l[1],m=Object(a.useState)({title:"",content:"",time:"",category:""}),p=Object(b.a)(m,2),h=p[0],d=p[1];return Object(a.useEffect)((function(){e.loading(),function(){return O.apply(this,arguments)}().then((function(t){e.loading(),u(t)}))}),[]),r.a.createElement("div",null,"titleList"===c?s.map((function(t){return r.a.createElement("h4",{className:v.a.title,onClick:function(){e.loading(),o("articleDetail"),function(e){return j.apply(this,arguments)}(t.name).then((function(t){e.loading(),d({title:JSON.parse(decodeURIComponent(escape(atob(t.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(t.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(t.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(t.content)))).category})}))}},t.name)})):r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){o("titleList"),d({title:"",content:"",time:"",category:""})}},"\u8fd4\u56de\u6587\u7ae0\u5217\u8868"),r.a.createElement("h3",null,h.title),r.a.createElement(g.a,{className:v.a["article-content"],source:h.content,escapeHtml:!1})))},I=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).recorder=void 0,n.clearInput=function(){n.setState({text:"",title:""}),localStorage.removeItem("writing-title"),localStorage.removeItem("writing-text")},n.save=function(){localStorage.setItem("writing-title",n.state.title),localStorage.setItem("writing-text",n.state.text),console.log((new Date).toLocaleString()+"\uff0c\u81ea\u52a8\u4fdd\u5b58\u8349\u7a3f\u6210\u529f\uff01")},n.push=function(){n.state.title?(n.props.loading(),function(e,t,n){return N.apply(this,arguments)}(n.state.title,n.state.text,"\u6280\u672f").then((function(){n.props.loading(),alert("\u606d\u559c\uff0c\u53d1\u5e03\u6210\u529f\uff01"),n.clearInput()}))):alert("\u8bf7\u8f93\u5165\u6807\u9898\u3002")},n.state={text:localStorage.getItem("writing-text")||"",title:localStorage.getItem("writing-title")||"",category:"life"},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.recorder=setInterval((function(){var t=localStorage.getItem("writing-text")&&localStorage.getItem("writing-text").length||0;Math.abs(t-e.state.text.length)>100&&e.save()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.recorder)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("input",{className:v.a["write-title"],value:this.state.title,placeholder:"\u9898\u76ee",onChange:function(t){e.setState({title:t.target.value})}}),r.a.createElement("div",{className:v.a["editor-container"]},r.a.createElement("textarea",{onChange:function(t){e.setState({text:t.target.value})},className:v.a["write-textarea"],value:this.state.text,placeholder:"\u6b63\u6587"}),r.a.createElement(g.a,{source:this.state.text,className:v.a.parseMarkdown,escapeHtml:!1})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.push,className:v.a.submitButton},"\u53d1\u5e03"),r.a.createElement("button",{className:v.a.submitButton,onClick:this.clearInput},"\u91cd\u7f6e")))}}]),t}(r.a.Component),C=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1},n.loading=function(){n.setState({loading:!n.state.loading})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("nav",{className:v.a["sider-menu"]},r.a.createElement("div",null,r.a.createElement("span",{role:"img","aria-label":"author"},"\ud83d\udc6b"),r.a.createElement("h3",null,"Jovi & Candy")),r.a.createElement(p.b,{to:"/"},r.a.createElement("ruby",null,"\u8bb0\u5f55",r.a.createElement("rt",null,"ji lu"))),r.a.createElement(p.b,{to:"/write"},r.a.createElement("ruby",null,"\u5199\u4f5c",r.a.createElement("rt",null,"xie zuo"))),r.a.createElement(p.b,{to:"/about"},r.a.createElement("ruby",null,"\u5173\u4e8e",r.a.createElement("rt",null,"guan yu"))),r.a.createElement("div",{className:v.a.flagcounter,title:"\u4e00\u4e2a\u7b80\u5355\u7684\u8bbf\u95ee\u91cf\u7edf\u8ba1"})),r.a.createElement("div",{className:v.a.content},r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/"},r.a.createElement(S,{loading:this.loading})),r.a.createElement(h.a,{exact:!0,path:"/write"},r.a.createElement(I,{loading:this.loading})),r.a.createElement(h.a,{exact:!0,path:"/about"},r.a.createElement(f,null)))),this.state.loading?r.a.createElement("div",{className:v.a.loading},"\u52a0\u8f7d\u4e2d..."):null)}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},3:function(e,t,n){e.exports={content:"src_content__2Phc-",loading:"src_loading__25YUa","sider-menu":"src_sider-menu__IjrAu",flagcounter:"src_flagcounter__3vBzl",title:"src_title__1wFcY","article-content":"src_article-content__ON2mb",skeleton:"src_skeleton__1_feR",skeletonTitle:"src_skeletonTitle__1vN5r","skeleton-stretch":"src_skeleton-stretch__3LP68",skeletonTime:"src_skeletonTime__3GTTN",skeletonContent:"src_skeletonContent__yweeH","write-title":"src_write-title__3r8TB","editor-container":"src_editor-container__GXPwU",parseMarkdown:"src_parseMarkdown__apsFu","write-textarea":"src_write-textarea__1ghOX",submitButton:"src_submitButton__17s1V"}},76:function(e,t,n){e.exports=n(215)},81:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.604faf1b.chunk.js.map