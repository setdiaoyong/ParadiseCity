(this["webpackJsonpparadise-city-mini"]=this["webpackJsonpparadise-city-mini"]||[]).push([[0],{0:function(t,e,a){t.exports={root:"src_root__39kTn",content:"src_content__2Phc-",loading:"src_loading__25YUa",load:"src_load__1xkeu",loaded:"src_loaded__1VmJY","sider-menu":"src_sider-menu__IjrAu",about:"src_about__3dBuZ",back:"src_back__1f5Pc",title:"src_title__1wFcY","article-title":"src_article-title__2Z_DP","article-timestamp":"src_article-timestamp__21eB8","article-content":"src_article-content__ON2mb","write-title":"src_write-title__3r8TB","editor-container":"src_editor-container__GXPwU","write-textarea":"src_write-textarea__1ghOX",parseMarkdown:"src_parseMarkdown__apsFu",submitButton:"src_submitButton__17s1V",rot:"src_rot__35X_3"}},11:function(t,e){t.exports=React},185:function(t,e){},196:function(t,e,a){"use strict";a.r(e);a(60);var n=a(13),c=a(14),r=a(17),o=a(15),i=a(18),l=a(0),s=a.n(l),u=a(16),m=a.n(u),h=a(1),p=a.n(h),d=a(5),f="61e06fdec3996fbda3c",g="eb8094d137bf927e7e5b2";function R(){return(R=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article",{method:"GET",headers:{Authorization:"token "+f+g}}).then((function(t){return t.status<299?t.json():null})).then((function(t){return t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t){return b.apply(this,arguments)}function b(){return(b=Object(d.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e,{method:"GET",headers:{Authorization:"token "+f+g}}).then((function(t){return t.json()})).then((function(t){return t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=Object(d.a)(p.a.mark((function t(e,a,n){var c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Date.now(),t.next=3,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+"-"+c+".md",{method:"PUT",headers:{Authorization:"token "+f+g},body:JSON.stringify({message:"AutoPush Article: "+e,content:btoa(unescape(encodeURIComponent(JSON.stringify({title:e,content:a,time:c,category:n}))))})}).then((function(t){return t.json()})).then((function(t){return!0})).catch((function(t){return!1}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=Object(d.a)(p.a.mark((function t(e,a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+".md",{method:"DELETE",headers:{Authorization:"token "+f+g},body:JSON.stringify({message:"AutoDelete article: "+e,sha:a})}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var E=(0,ReactRouterDOM.withRouter)((function(t){var e=window.PARADISE_history.location.state||t.article;return document.location.hash||t.history.push("/"),React.createElement("div",null,React.createElement("p",{className:s.a["article-title"]},e.title),React.createElement("p",{className:s.a["article-timestamp"]},e.time?React.createElement(React.Fragment,null,React.createElement("span",{className:s.a.back,onClick:function(){t.history.push("/")}},"RETURN"),"--mainColor: #f0f0f0"===document.querySelector(":root").getAttribute("style")?React.createElement("span",{className:s.a.back,style:{color:"red"},onClick:function(){(function(t,e){return y.apply(this,arguments)})(e.title+"-"+e.time,e.sha).then((function(){location.href=location.origin}))}},"DELETE"):null):null),React.createElement(m.a,{className:s.a["article-content"],source:e.content,escapeHtml:!1}),React.createElement("span",{className:s.a.back,onClick:function(){t.history.push("/")}},"RETURN"))})),w=function(t){return t.articleList.map((function(e){return React.createElement("p",{className:s.a.title,key:e.name,onClick:function(){t.loading(),_(e.name).then((function(t){t&&(window.PARADISE_history.push("/article",{title:JSON.parse(decodeURIComponent(escape(atob(t.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(t.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(t.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(t.content)))).category,sha:t.sha}),document.location.hash=t.sha)})).finally((function(){t.loading()}))}},e.name.slice(0,"0000/00/00"===e.date?-3:-17))}))},x=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(r.a)(this,Object(o.a)(e).call(this,t))).recorder=void 0,a.clearInput=function(){a.setState({text:"",title:"",help:""}),localStorage.removeItem("writing-title"),localStorage.removeItem("writing-text")},a.save=function(){localStorage.setItem("writing-title",a.state.title),localStorage.setItem("writing-text",a.state.text)},a.push=function(){a.state.title?(a.props.loading(),function(t,e,a){return v.apply(this,arguments)}(a.state.title,a.state.text,"\u6280\u672f").then((function(){a.props.loading(),a.setState({text:"",title:"",help:"\ud83d\ude0apublish success!"})}))):a.setState({help:"\ud83e\udd22need a title!"})},a.state={text:localStorage.getItem("writing-text")||"",title:localStorage.getItem("writing-title")||"",category:"life",help:""},a}return Object(i.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.recorder=setInterval((function(){var e=localStorage.getItem("writing-text")&&localStorage.getItem("writing-text").length||0;Math.abs(e-t.state.text.length)>100&&t.save()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.recorder)}},{key:"render",value:function(){var t=this;return React.createElement("div",null,React.createElement("input",{className:s.a["write-title"],value:this.state.title,onChange:function(e){t.setState({title:e.target.value})}}),React.createElement("div",{className:s.a["editor-container"]},React.createElement("textarea",{onChange:function(e){t.setState({text:e.target.value})},className:s.a["write-textarea"],value:this.state.text}),React.createElement(m.a,{source:this.state.text,className:s.a.parseMarkdown,escapeHtml:!1})),React.createElement("div",null,React.createElement("button",{onClick:this.push,className:s.a.submitButton},"publish"),React.createElement("button",{className:s.a.submitButton,onClick:this.clearInput},"clear")),React.createElement("p",{style:{color:"red"}},this.state.help))}}]),e}(React.Component),S=function(){var t=document.createElement("img");return t.src="https://s11.flagcounter.com/count/m1nf/bg_FFFFFF/txt_000000/border_FFFFFF/columns_2/maxflags_64/viewers_3/labels_1/pageviews_1/flags_0/percent_0/",t.onload=function(){var e=document.querySelector(".load-counter");e&&e.classList.remove("load-counter"),e&&e.appendChild(t)},React.createElement(React.Fragment,null,React.createElement("p",null,"Hey."),React.createElement("p",null,"Leaving something on the Internet!"),React.createElement("div",{className:"load-counter",style:{marginTop:"1em"}}))},k=a(58),N=Object(k.a)(),O=ReactRouterDOM,I=O.BrowserRouter,C=O.Switch,A=O.Route,j=O.Link;window.PARADISE_history=window.PARADISE_history||N;var D=function(t){function e(){var t,a;Object(n.a)(this,e);for(var c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return(a=Object(r.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(i)))).state={loading:!1,articleList:[],article:{}},a.loading=function(){a.setState({loading:!a.state.loading})},a.coloring=function(t){document.querySelector(":root").setAttribute("style","--mainColor: "+t.target.value),a.forceUpdate()},a}return Object(i.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.loading(),function(){return R.apply(this,arguments)}().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(document.location.hash){var a=document.location.hash.split("#")[1],n=e.filter((function(t){return a.indexOf(t.sha)>-1}));n.length?(t.loading(),_(n[0].name).then((function(e){e&&t.setState({article:{title:JSON.parse(decodeURIComponent(escape(atob(e.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(e.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(e.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(e.content)))).category,sha:e.sha}})})).finally((function(){t.loading()}))):location.href=location.origin}t.setState({articleList:e.map((function(t){var e=t.name.slice(-16,-3).replace(/\D*/,"");if(13===e.length){var a=new Date(parseInt(e));t.year=a.getFullYear(),t.month=a.getMonth()+1,t.day=a.getDate(),t.date=a.toLocaleDateString()}else t.year=0,t.month=0,t.day=0,t.date="0000/00/00";return t})).sort((function(t,e){return t.date<e.date?1:-1}))||[]})})).finally((function(){t.loading()}))}},{key:"render",value:function(){return React.createElement(I,{history:N},React.createElement("nav",{className:s.a["sider-menu"]},React.createElement(j,{to:"/"},"Article"),React.createElement("label",{htmlFor:"color"},"\ud83d\udc6b"),React.createElement(j,{to:"/write"},"Writing"),React.createElement("input",{type:"color",id:"color",onChange:this.coloring})),React.createElement("div",{className:s.a.content},React.createElement(C,null,React.createElement(A,{exact:!0,path:"/"},React.createElement(w,{loading:this.loading,articleList:this.state.articleList})),React.createElement(A,{exact:!0,path:"/article"},React.createElement(E,{loading:this.loading,article:this.state.article})),React.createElement(A,{exact:!0,path:"/write"},React.createElement(x,{loading:this.loading})),React.createElement(A,{exact:!0,path:"/about"},React.createElement(S,null)))),React.createElement(j,{to:"/about"},"Author"),this.state.loading?React.createElement("div",{className:s.a.loading}):React.createElement("div",{className:s.a.loaded}))}}]),e}(React.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ReactDOM.render(React.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},59:function(t,e,a){t.exports=a(196)},60:function(t,e,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.5c75e92f.chunk.js.map