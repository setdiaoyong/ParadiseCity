(this["webpackJsonpparadise-city-mini"]=this["webpackJsonpparadise-city-mini"]||[]).push([[0],{0:function(t,e,a){t.exports={"sider-menu":"src_sider-menu__IjrAu",content:"src_content__2Phc-",loading:"src_loading__25YUa",load:"src_load__1xkeu",loaded:"src_loaded__1VmJY","main-container":"src_main-container__r9wWQ",catagory:"src_catagory__3p3-k","catagory-item":"src_catagory-item__2cKyD","catagory-item-active":"src_catagory-item-active__y5XnI",title:"src_title__1wFcY","title-name":"src_title-name__ogVwK","title-props":"src_title-props__3iY79","title-user":"src_title-user__2TTrh","article-container":"src_article-container__1iLui",back:"src_back__1f5Pc","article-props":"src_article-props__1Er2u","article-title":"src_article-title__2Z_DP","article-content":"src_article-content__ON2mb","write-container":"src_write-container__1tKSu","write-title":"src_write-title__3r8TB","write-catagory":"src_write-catagory__21sNK","editor-container":"src_editor-container__GXPwU","write-textarea":"src_write-textarea__1ghOX",parseMarkdown:"src_parseMarkdown__apsFu",submitButton:"src_submitButton__17s1V","about-container":"src_about-container__23v7L",rot:"src_rot__35X_3"}},11:function(t,e){t.exports=React},187:function(t,e){},198:function(t,e,a){"use strict";a.r(e);a(62);var n=a(13),c=a(14),r=a(17),o=a(15),i=a(18),l=a(0),s=a.n(l),u=a(16),m=a.n(u),p=a(1),h=a.n(p),d=a(5),g="61e06fdec3996fbda3c",f="eb8094d137bf927e7e5b2";function _(){return(_=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article",{method:"GET",headers:{Authorization:"token "+g+f}}).then((function(t){return t.status<299?t.json():null})).then((function(t){return t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e,{method:"GET",headers:{Authorization:"token "+g+f}}).then((function(t){return t.json()})).then((function(t){return t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=Object(d.a)(h.a.mark((function t(e,a,n){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Date.now(),t.next=3,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+"-"+n+"-"+c+".md",{method:"PUT",headers:{Authorization:"token "+g+f},body:JSON.stringify({message:"AutoPush Article: "+e,content:btoa(unescape(encodeURIComponent(JSON.stringify({title:e,content:a,time:c,category:n}))))})}).then((function(t){return t.json()})).then((function(t){return!0})).catch((function(t){return!1}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=Object(d.a)(h.a.mark((function t(e,a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=prompt("\u8f93\u5165Token:"),alert(n+" \u4e0d\u662f\u6709\u6548\u7684 Token"),t.abrupt("return",Promise.reject());case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var E=(0,ReactRouterDOM.withRouter)((function(t){var e=window.PARADISE_history.location.state||t.article;return document.location.hash||t.history.push("/"),React.createElement(React.Fragment,null,React.createElement("span",{className:s.a.back,onClick:function(){t.history.push("/")}},"\u8fd4\u56de"),"--mainColor: #f0f0f0"===document.querySelector(":root").getAttribute("style")?React.createElement("span",{className:s.a.back,style:{color:"red"},onClick:function(){(function(t,e){return w.apply(this,arguments)})(e.title+"-"+e.time,e.sha).then((function(){location.href=location.origin}))}},"\u5220\u9664"):null,React.createElement("div",{className:s.a["article-container"]},React.createElement("p",{className:s.a["article-title"]},e.title),React.createElement("p",{className:s.a["article-props"]},e.time&&React.createElement("span",null,"\u6700\u540e\u7f16\u8f91\u4e8e ",new Date(e.time).toLocaleDateString()),e.content&&React.createElement("span",null,"\u9884\u8ba1\u9605\u8bfb\u65f6\u95f4 ",(e.content.length/200+1).toFixed(0)," \u5206\u949f")),React.createElement(m.a,{className:s.a["article-content"],source:e.content,escapeHtml:!1})))})),b=a(60),A=a(58),S=a.n(A),k=function(t){var e=React.useState("\u6280\u672f"),a=Object(b.a)(e,2),n=a[0],c=a[1];return React.createElement("div",{className:s.a["main-container"]},React.createElement("div",{className:s.a.catagory},t.articleList.map((function(t){return t.catagory||"\u6280\u672f"})).filter((function(t,e,a){return a.indexOf(t,0)===e})).map((function(t,e,a){return React.createElement("a",{onClick:function(t){c(t.target.innerText)},className:n===t?s.a["catagory-item-active"]:s.a["catagory-item"]},t)}))),t.articleList.filter((function(t){return t.name.slice(0,-17).split("-")[1]===n||void 0===t.name.slice(0,-17).split("-")[1]&&"\u6280\u672f"===n})).map((function(e){return React.createElement("p",{className:s.a.title,key:e.name,onClick:function(){t.loading(),R(e.name).then((function(t){t&&(window.PARADISE_history.push("/article",{title:JSON.parse(decodeURIComponent(escape(atob(t.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(t.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(t.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(t.content)))).category,sha:t.sha}),document.location.hash=t.sha)})).finally((function(){t.loading()}))}},React.createElement("img",{src:S.a,alt:"",className:s.a["title-user"]}),React.createElement("p",{className:s.a["title-name"]},e.name.slice(0,"0000/00/00"===e.date?-3:-17).split("-")[0]),React.createElement("span",{className:s.a["title-props"]},"0000/00/00"===e.date?"\u6765\u81ea\u535a\u5ba2\u56ed":e.date),React.createElement("span",{className:s.a["title-props"]},e.size+"\u5b57\u8282"))})))},x=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(r.a)(this,Object(o.a)(e).call(this,t))).recorder=void 0,a.clearInput=function(){a.setState({text:"",title:"",help:""}),localStorage.removeItem("writing-title"),localStorage.removeItem("writing-text")},a.save=function(){localStorage.setItem("writing-title",a.state.title),localStorage.setItem("writing-text",a.state.text)},a.push=function(){a.state.title?(a.props.loading(),function(t,e,a){return v.apply(this,arguments)}(a.state.title,a.state.text,a.state.category||"\u6280\u672f").then((function(){a.props.loading(),a.setState({text:"",title:"",help:"\ud83d\ude0apublish success!"})}))):a.setState({help:"\ud83e\udd22need a title!"})},a.state={text:localStorage.getItem("writing-text")||"",title:localStorage.getItem("writing-title")||"",category:"",help:""},a}return Object(i.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.recorder=setInterval((function(){var e=localStorage.getItem("writing-text")&&localStorage.getItem("writing-text").length||0;Math.abs(e-t.state.text.length)>100&&t.save()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.recorder)}},{key:"render",value:function(){var t=this;return React.createElement("div",{className:s.a["write-container"]},React.createElement("input",{className:s.a["write-title"],placeholder:"\u6807\u9898\u5c06\u51fa\u73b0\u5728\u9996\u9875",value:this.state.title,onChange:function(e){t.setState({title:e.target.value})}}),React.createElement("div",{className:s.a["editor-container"]},React.createElement("textarea",{onChange:function(e){t.setState({text:e.target.value})},placeholder:"\u4f7f\u7528Markdown\u8bed\u6cd5\u4e66\u5199\u6b63\u6587\uff0c\u5c06\u5728\u53f3\u4fa7\u9762\u677f\u9884\u89c8\u683c\u5f0f",className:s.a["write-textarea"],value:this.state.text}),React.createElement(m.a,{source:this.state.text,className:s.a.parseMarkdown,escapeHtml:!1})),React.createElement("input",{className:s.a["write-catagory"],placeholder:"\u81ea\u5b9a\u4e49\u5206\u7c7b\uff0c\u9ed8\u8ba4\u4e3a[\u6280\u672f]",value:this.state.category,onChange:function(e){t.setState({category:e.target.value})}}),React.createElement("div",null,React.createElement("button",{onClick:this.push,className:s.a.submitButton},"publish"),React.createElement("button",{className:s.a.submitButton,onClick:this.clearInput},"clear")),React.createElement("p",{style:{color:"red"}},this.state.help))}}]),e}(React.Component),N=function(){var t=document.createElement("img");return t.src="https://s11.flagcounter.com/count/m1nf/bg_FFFFFF/txt_000000/border_FFFFFF/columns_2/maxflags_64/viewers_3/labels_1/pageviews_1/flags_0/percent_0/",t.onload=function(){var e=document.querySelector(".load-counter");e&&e.classList.remove("load-counter"),e&&e.appendChild(t)},React.createElement("div",{className:s.a["about-container"]},React.createElement("p",null,"\u563f"),React.createElement("p",null,"\u8fd9\u662f\u6211\u7684\u7f51\u7edc\u65e5\u5fd7"),React.createElement("p",null,"\u770b\u770b\u548c\u4f60\u4e00\u6837\u7684\u4eba\u6765\u81ea\u54ea\u91cc"),React.createElement("div",{className:"load-counter",style:{marginTop:"10px"}}))},I=a(59),O=Object(I.a)(),C=ReactRouterDOM,D=C.BrowserRouter,U=C.Switch,F=C.Route,j=C.Link;window.PARADISE_history=window.PARADISE_history||O;var M=function(t){function e(){var t,a;Object(n.a)(this,e);for(var c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return(a=Object(r.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(i)))).state={loading:!1,articleList:[],article:{}},a.initData=function(){(function(){return _.apply(this,arguments)})().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(document.location.hash){var e=document.location.hash.split("#")[1],n=t.filter((function(t){return e.indexOf(t.sha)>-1}));n.length?(a.loading(),R(n[0].name).then((function(t){t&&a.setState({article:{title:JSON.parse(decodeURIComponent(escape(atob(t.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(t.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(t.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(t.content)))).category,sha:t.sha}})})).finally((function(){a.loading()}))):location.href=location.origin}a.setState({articleList:t.map((function(t){var e=t.name.slice(-16,-3).replace(/\D*/,"");if(13===e.length){var a=new Date(parseInt(e));t.year=a.getFullYear(),t.month=a.getMonth()+1,t.day=a.getDate(),t.date=a.toLocaleDateString(),t.catagory=t.name.slice(0,-17).split("-")[1]||"\u6280\u672f"}else t.year=0,t.month=0,t.day=0,t.date="0000/00/00";return t})).sort((function(t,e){return t.date<e.date?1:-1}))||[]})})).finally((function(){a.loading()}))},a.loading=function(){a.setState({loading:!a.state.loading})},a.coloring=function(t){document.querySelector(":root").setAttribute("style","--mainColor: "+t.target.value),a.forceUpdate()},a}return Object(i.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.loading(),this.initData()}},{key:"render",value:function(){return React.createElement(D,{history:O},React.createElement("nav",{className:s.a["sider-menu"]},React.createElement("label",{htmlFor:"color",title:"\u70b9\u51fb\u66f4\u6362\u6587\u5b57\u989c\u8272"},"\ud83d\udc6b"),React.createElement(j,{to:"/about"},"\u6211"),React.createElement(j,{to:"/write"},"\u521b\u4f5c"),React.createElement(j,{to:"/",onClick:this.initData},"\u9996\u9875"),React.createElement("input",{type:"color",id:"color",onChange:this.coloring})),React.createElement("div",{className:s.a.content},React.createElement(U,null,React.createElement(F,{exact:!0,path:"/"},React.createElement(k,{loading:this.loading,articleList:this.state.articleList})),React.createElement(F,{exact:!0,path:"/article"},React.createElement(E,{loading:this.loading,article:this.state.article})),React.createElement(F,{exact:!0,path:"/write"},React.createElement(x,{loading:this.loading})),React.createElement(F,{exact:!0,path:"/about"},React.createElement(N,null)))),this.state.loading?React.createElement("div",{className:s.a.loading}):React.createElement("div",{className:s.a.loaded}))}}]),e}(React.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ReactDOM.render(React.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},58:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAvklEQVRYhe2YsQ2AMAwEAVHQMQSzwCzUDMI8LMMQlHRUFETCbycCffHXBqLTx0ms1OO5VTdDv1Zu9mN5GyqZp/H/+Q8SQrTGWLK6ocrInocuIQkh6ITquZucn/prs2Q30CUkIQSdkHVS2xi3fQl0CUkIQScUKOrs9iMEXUISQtAJPYr6o8PXJtkrdAlJCJF/2/tb2BB0CUkIQSekFhYhIQSdkFXUds+a/Qpr7wa6hCSEoBMKvKD9A11CEkLQCV0ZTCcOXM9UwQAAAABJRU5ErkJggg=="},61:function(t,e,a){t.exports=a(198)},62:function(t,e,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.152e45f4.chunk.js.map