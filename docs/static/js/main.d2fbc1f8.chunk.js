(this["webpackJsonpparadise-city-mini"]=this["webpackJsonpparadise-city-mini"]||[]).push([[0],{0:function(t,e,a){t.exports={root:"src_root__2JL5O",content:"src_content__3N9hT",loading:"src_loading__3ANA8",load:"src_load__2XCvD",loaded:"src_loaded__tskcK","sider-menu":"src_sider-menu__1Bw2a",flagcounter:"src_flagcounter__2_mf0",about:"src_about__3l1kQ",back:"src_back__6MTGB",title:"src_title__YXAJk","article-title":"src_article-title__2UyCo","article-timestamp":"src_article-timestamp__9UsRM","article-content":"src_article-content__3Q680","write-title":"src_write-title__12-bU","editor-container":"src_editor-container__2m6Aw","write-textarea":"src_write-textarea__152_-",parseMarkdown:"src_parseMarkdown__1ObP0",submitButton:"src_submitButton__24YPm",rot:"src_rot__115DF"}},12:function(t,e){t.exports=React},184:function(t,e){},195:function(t,e,a){"use strict";a.r(e);a(60);var n=a(14),c=a(15),r=a(18),o=a(16),i=a(19),l=a(10),s=a(0),u=a.n(s),m=a(17),p=a.n(m),h=a(1),d=a.n(h),f=a(5),g="61e06fdec3996fbda3c",R="eb8094d137bf927e7e5b2";function b(){return(b=Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article",{method:"GET",headers:{Authorization:"token "+g+R}}).then((function(t){return t.status<299?t.json():null})).then((function(t){return t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t){return v.apply(this,arguments)}function v(){return(v=Object(f.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e,{method:"GET",headers:{Authorization:"token "+g+R}}).then((function(t){return t.json()})).then((function(t){return t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){return(E=Object(f.a)(d.a.mark((function t(e,a,n){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Date.now(),t.next=3,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+"-"+c+".md",{method:"PUT",headers:{Authorization:"token "+g+R},body:JSON.stringify({message:"AutoPush Article: "+e,content:btoa(unescape(encodeURIComponent(JSON.stringify({title:e,content:a,time:c,category:n}))))})}).then((function(t){return t.json()})).then((function(t){return!0})).catch((function(t){return!1}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=Object(f.a)(d.a.mark((function t(e,a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.github.com/repos/xiaozhaoqi/privateRepository/contents/files/article/"+e+".md",{method:"DELETE",headers:{Authorization:"token "+g+R},body:JSON.stringify({message:"AutoDelete article: "+e,sha:a})}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var y=React,x=y.useEffect,k=y.useState,O=function(t){var e=k("titleList"),a=Object(l.a)(e,2),n=a[0],c=a[1],r=k(!1),o=Object(l.a)(r,2),i=o[0],s=o[1],m=k([]),h=Object(l.a)(m,2),d=h[0],f=h[1],g=k({title:"",content:"",time:"",category:"",sha:""}),R=Object(l.a)(g,2),v=R[0],E=R[1];return x((function(){t.loading(),function(){return b.apply(this,arguments)}().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.loading(),f(e.map((function(t){var e=t.name.slice(-16,-3).replace(/\D*/,"");if(13===e.length){var a=new Date(parseInt(e));t.year=a.getFullYear(),t.month=a.getMonth()+1,t.day=a.getDate(),t.date=a.toLocaleDateString()}else t.year=0,t.month=0,t.day=0,t.date="0000/00/00";return t})).sort((function(t,e){return t.date<e.date?1:-1}))||[]),window.location.search){var a=window.location.search.split("?s=")[1],n=e.filter((function(t){return a.indexOf(t.sha)>-1}));n.length?(t.loading(),c("articleDetail"),_(n[0].name).then((function(e){t.loading(),window.history.replaceState(null,null,"?s="+e.sha),e&&E({title:JSON.parse(decodeURIComponent(escape(atob(e.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(e.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(e.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(e.content)))).category,sha:e.sha})})).catch((function(){s(!0)}))):location.href=location.origin}})).catch((function(){s(!0)}))}),[]),React.createElement("div",null,i&&React.createElement("h1",null,"You can not establish a connection with GitHub Server.",React.createElement("br",null),React.createElement("a",{href:location.href},"\u270aRELOAD\u270a")),"titleList"===n?d.map((function(e){return React.createElement("p",{className:u.a.title,key:e.name,onClick:function(){t.loading(),c("articleDetail"),_(e.name).then((function(e){t.loading(),window.history.replaceState(null,null,"?s="+e.sha),e&&E({title:JSON.parse(decodeURIComponent(escape(atob(e.content)))).title,content:JSON.parse(decodeURIComponent(escape(atob(e.content)))).content,time:JSON.parse(decodeURIComponent(escape(atob(e.content)))).time,category:JSON.parse(decodeURIComponent(escape(atob(e.content)))).category,sha:e.sha})})).catch((function(){s(!0)}))}},React.createElement("span",null,"[",e.date,"] "),e.name.slice(0,"0000/00/00"===e.date?-3:-17))})):React.createElement("div",null,React.createElement("p",{className:u.a["article-title"]},v.title),React.createElement("p",{className:u.a["article-timestamp"]},v.time?React.createElement(React.Fragment,null,React.createElement("span",{className:u.a.back,onClick:function(){c("titleList"),E({title:"",content:"",time:"",category:"",sha:""})}},"RETURN"),"--mainColor: #f0f0f0"===document.querySelector(":root").getAttribute("style")?React.createElement("span",{className:u.a.back,style:{color:"red"},onClick:function(){(function(t,e){return w.apply(this,arguments)})(v.title+"-"+v.time,v.sha).then((function(){location.href=location.origin})).catch((function(){s(!0)}))}},"DELETE"):null,React.createElement("span",null,new Date(v.time).toLocaleString())):null),React.createElement(p.a,{className:u.a["article-content"],source:v.content,escapeHtml:!1}),React.createElement("span",{className:u.a.back,onClick:function(){c("titleList"),E({title:"",content:"",time:"",category:"",sha:""})}},"RETURN")))},S=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(r.a)(this,Object(o.a)(e).call(this,t))).recorder=void 0,a.clearInput=function(){a.setState({text:"",title:"",help:""}),localStorage.removeItem("writing-title"),localStorage.removeItem("writing-text")},a.save=function(){localStorage.setItem("writing-title",a.state.title),localStorage.setItem("writing-text",a.state.text)},a.push=function(){a.state.title?(a.props.loading(),function(t,e,a){return E.apply(this,arguments)}(a.state.title,a.state.text,"\u6280\u672f").then((function(){a.props.loading(),a.setState({text:"",title:"",help:"\ud83d\ude0apublish success!"})}))):a.setState({help:"\ud83e\udd22need a title!"})},a.state={text:localStorage.getItem("writing-text")||"",title:localStorage.getItem("writing-title")||"",category:"life",help:""},a}return Object(i.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.recorder=setInterval((function(){var e=localStorage.getItem("writing-text")&&localStorage.getItem("writing-text").length||0;Math.abs(e-t.state.text.length)>100&&t.save()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.recorder)}},{key:"render",value:function(){var t=this;return React.createElement("div",null,React.createElement("input",{className:u.a["write-title"],value:this.state.title,onChange:function(e){t.setState({title:e.target.value})}}),React.createElement("div",{className:u.a["editor-container"]},React.createElement("textarea",{onChange:function(e){t.setState({text:e.target.value})},className:u.a["write-textarea"],value:this.state.text}),React.createElement(p.a,{source:this.state.text,className:u.a.parseMarkdown,escapeHtml:!1})),React.createElement("div",null,React.createElement("button",{onClick:this.push,className:u.a.submitButton},"publish"),React.createElement("button",{className:u.a.submitButton,onClick:this.clearInput},"clear")),React.createElement("p",{style:{color:"red"}},this.state.help))}}]),e}(React.Component),N=function(){var t=document.createElement("img");return t.src="https://s11.flagcounter.com/count/m1nf/bg_FFFFFF/txt_000000/border_FFFFFF/columns_2/maxflags_64/viewers_3/labels_1/pageviews_1/flags_0/percent_0/",t.onload=function(){var e=document.querySelector(".load-counter");e&&e.classList.remove("load-counter"),e&&e.appendChild(t)},React.createElement(React.Fragment,null,React.createElement("p",null,"Hey."),React.createElement("p",null,"Leaving something on the Internet!"),React.createElement("div",{className:"load-counter",style:{marginTop:"1em"}}))},C=ReactRouterDOM,I=C.BrowserRouter,j=C.Switch,A=C.Route,D=C.Link,F=function(t){function e(){var t,a;Object(n.a)(this,e);for(var c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return(a=Object(r.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(i)))).state={loading:!1},a.loading=function(){a.setState({loading:!a.state.loading})},a.coloring=function(t){document.querySelector(":root").setAttribute("style","--mainColor: "+t.target.value),a.forceUpdate()},a}return Object(i.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return React.createElement(I,null,React.createElement("nav",{className:u.a["sider-menu"]},React.createElement(D,{to:"/"},"Article"),React.createElement("label",{htmlFor:"color"},"\ud83d\udc6b"),React.createElement(D,{to:"/write"},"Writing"),React.createElement("input",{type:"color",id:"color",onChange:this.coloring})),React.createElement("div",{className:u.a.content},React.createElement(j,null,React.createElement(A,{exact:!0,path:"/"},React.createElement(O,{loading:this.loading})),React.createElement(A,{exact:!0,path:"/write"},React.createElement(S,{loading:this.loading})),React.createElement(A,{exact:!0,path:"/about"},React.createElement(N,null)))),React.createElement("div",{className:u.a.flagcounter}),React.createElement(D,{to:"/about"},"Author"),this.state.loading?React.createElement("div",{className:u.a.loading}):React.createElement("div",{className:u.a.loaded}))}}]),e}(React.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ReactDOM.render(React.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},59:function(t,e,a){t.exports=a(195)},60:function(t,e,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.d2fbc1f8.chunk.js.map